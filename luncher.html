<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Speaq Quiz Referral Launcher</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <p>Redirecting you to Speaq Quizâ€¦</p>
  <script>
    (function () {
      const params = new URLSearchParams(window.location.search);
      const ref = params.get('ref');

      if (ref) {
        // Store referral in backend
        const storeUrl = `https://script.google.com/macros/s/AKfycbwRq1lHnNX6vpg3FSh3NJCDCdi6aZoBOaEHj4_K_BkFBl2cxhk9Gbc6OU8v5XTyNz09/exec?action=storeReferral&ref=${encodeURIComponent(ref)}`;
        fetch(storeUrl, { mode: 'no-cors' });

        // Also save to localStorage for use in Google Site
        localStorage.setItem('pendingReferral', ref);
      }

      // Fast redirect to Google Site
      window.location.replace("https://sites.google.com/view/speaqquiz");
    })();
  </script>
</body>
</html>
